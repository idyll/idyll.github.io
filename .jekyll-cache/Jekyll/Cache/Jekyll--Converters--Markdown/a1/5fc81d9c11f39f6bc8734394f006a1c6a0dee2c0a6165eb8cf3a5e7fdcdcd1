I"ı<p>Amazonâ€™s ALB load balancing has been a huge improvement over ELBs but they have one glaring issue: they
route traffic as HTTP/1.1 on the backend even if it comes in as HTTP/2.</p>

<p>For some of our applications this is just fine, for others itâ€™s a huge issue â€“ we need the backend to serve
HTTP/2.</p>

<p>This is where Amazonâ€™s new Network Load Balancers come in. A NLB can be provisioned against elastic ip addresses
and preserves the incoming IP address from the remote user. It balances long running connections as a TCP balancer.</p>

<h3 id="configuration">Configuration</h3>

<p>When I attempt to set this up as a front-end balancer for some ECS Docker apps I couldnâ€™t get traffic going through.
I eneded up asking help on the forums and got it working when â€œD. Svanlundâ€ pointed out that the security groups on the
internal nodes need to be configure to accept external traffic.</p>

<p>This make sense. If the IP Address is preserved then we need to allow access from the originating IP.</p>

:ET